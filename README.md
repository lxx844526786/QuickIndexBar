# QuickIndexBar
自定义的索引栏

QuickIndexBar,我们继承了View,左边是一个ListView,右边是一个竖着的View

	1.首先我要在右边的view上绘制出26个英文字母.
	 因为文字默认的绘制起点是左下角,所以在这里设置成从文字底边的中心开始绘制.paint.setTextAlgin(Paint.Align.CENTER).

	2.有26个字母,所以我们要获取的是这26个字母的x,y坐标.那么x坐标是固定的,就是当前View的一半,而y坐标是不断变化的,我们要把这个view的高度等分成26块,那么y的坐标 = 格子高度的一半 + 当前文字高度的一半 + 当前的位置 * 格子的高度.
	然后在onDraw方法里就可以绘制出26个字母.

	3.我们需要判断当前手指的触摸点是哪个字母,通过拿到触摸点的y坐标,再除以格子的高度,得到的值就是字母对应的索引,
	首先,定义一个初始的触摸索引为-1,在onTouchEvent方法中,判断DOWN事件和MOVE事件时,手指的y坐标,得到当前手指的索引index,在MOVE事件中把index赋值给touchIndex.在UP事件中把touchIndex的值置为-1;再调用invalidate()方法重新绘制.
	 然后在onDraw方法中进行判断,如果当前的字母的索引等于手指触摸的索引,就改变颜色.

	4.我需要将触摸手指改变的事件暴露给外界,所以需要定义一个监听器,在字母改变的时候进行回调.首先我们在左边设置一个listview,把姓名设置进去,这个listview的item有两个控件,都是textview,上面一个表示名字的首字母,下面一个显示姓名.在Adpater的getView里面进行判断,当position位置大于0时候,判断当前名字的首字母和上一个名字的首字母是否相等,相等就隐藏后面的条目字母.用到了一个第三方jar包,pinjin4J.

	5.在MainActivity里拿到quickbar,设置字母滚动的监听事件.当传递过来的字母和friends里某个位置的姓名的首字母相等时候,就把这个条目置顶.找到过后立即中断.调用显示字母的方法,在整个view中间.

	6.在XML布局里面,设置一个textView,默认是隐藏的.提供一个方法显示字母,设置handler,在这个方法里先移除之前的任务,然后在设置文本内容.最后延迟2秒消失.
